<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sitemax — Sitemap Generator & SEO Tools</title>
  <meta name="description" content="Sitemax — automatic sitemap.xml & robots.txt generation for Vite-powered static sites. Perfect for GitHub Pages and SEO optimization." />

  <!-- Favicon -->
  <link rel="icon" href="./src/assets/favicon.png" type="image/png" />

  <!-- Open Graph -->
  <meta property="og:title" content="Sitemax — Sitemap Generator" />
  <meta property="og:description" content="Generate sitemap.xml & robots.txt automatically for your static site with Vite + GitHub Pages support." />
  <meta property="og:image" content="https://artechfuz3d.github.io/sitemax/og-image.png" />
  <meta property="og:url" content="https://artechfuz3d.github.io/sitemax/" />
  <meta property="og:type" content="website" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Sitemax — Sitemap Generator" />
  <meta name="twitter:description" content="SEO-friendly static site deployment with automatic sitemap & robots.txt." />
  <meta name="twitter:image" content="https://artechfuz3d.github.io/sitemax/og-image.png" />

  <link rel="stylesheet" crossorigin href="/sitemax/assets/main-DyuVZwYY.css">
</head>
  <body>
    <header>
      <div class="container header-row">
        <div class="logo">Sitemax</div>
        <nav>
          <a href="./" class="active">Home</a>
          <a href="./docs">Docs</a>
          <!-- <a href="./services">Services</a> -->
          <a href="./blog">Blog</a>
          <a href="./contact">Contact</a>
        </nav>
      </div>
    </header>

    <!-- Hero -->
    <main class="container hero">
      <div class="hero-left">
        <h1>Sitemax</h1>
        <p class="tagline">
          Automatic sitemap & robots.txt generator for
          <strong>Vite-powered static sites</strong> — built for fast deploys
          and SEO checks.
        </p>
        <div class="cta-row">
          <a class="btn-primary" href="./docs#installation">Get Started</a>
          <a
            class="btn-ghost"
            href="https://github.com/ArtechFuz3D/sitemax"
            target="_blank"
            rel="noopener"
            >View on GitHub</a
          >
        </div>
        <ul class="features">
          <li>✅ Generates sitemap.xml & robots.txt automatically</li>
          <li>✅ Works with GitHub Pages & Vite base paths</li>
          <li>✅ Lightweight & configurable plugin</li>
        </ul>
      </div>

      <aside class="hero-right">
        <h3>Live Test Logs</h3>
        <div
          id="logs"
          class="log-panel"
          aria-live="polite"
        ></div>
        <div class="log-controls">
          <button id="run-tests" class="btn-sm">Run Tests</button>
          <button id="clear-logs" class="btn-sm ghost">Clear</button>
        </div>
        <div id="plugin-test" class="plugin-status"></div>
      </aside>
    </main>

    <!-- Why section -->
    <section class="container why">
      <h2>Why Sitemax?</h2>
      <div class="why-grid">
        <div>
          <h3>SEO Ready</h3>
          <p>
            Ensure search engines discover your static site with auto-generated
            <code>sitemap.xml</code> and <code>robots.txt</code>.
          </p>
        </div>
        <div>
          <h3>Zero Config</h3>
          <p>
            Drop-in plugin for Vite. Just set <code>siteUrl</code> and build —
            everything else is automatic.
          </p>
        </div>
        <div>
          <h3>CI Friendly</h3>
          <p>
            Works seamlessly with GitHub Actions and Pages deployment out of the
            box.
          </p>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <p>&copy; 2025 Sitemax. All rights reserved.</p>
      </div>
    </footer>

    <!-- Demo Log Runner -->
    <script>
      const LOGS = [
        { text: "Checking plugin status...", delay: 600, type: "info" },
        { text: "Looking for sitemap.xml", delay: 800, type: "info" },
        {
          text: "Trying https://artechfuz3d.github.io/sitemax/sitemap.xml",
          delay: 900,
          type: "try",
        },
        { text: "sitemap.xml found", delay: 500, type: "ok" },
        { text: "Looking for robots.txt", delay: 600, type: "info" },
        {
          text: "Trying https://artechfuz3d.github.io/sitemax/robots.txt",
          delay: 800,
          type: "try",
        },
        { text: "robots.txt found", delay: 400, type: "ok" },
        { text: "All checks passed ✅", delay: 700, type: "success" },
      ];

      function appendLogLine(text, type = "info") {
        const out = document.getElementById("logs");
        const line = document.createElement("div");
        line.className = "log-line " + type;
        const span = document.createElement("span");
        line.appendChild(span);
        out.appendChild(line);
        out.scrollTop = out.scrollHeight;
        let i = 0;
        const t = setInterval(() => {
          span.textContent += text.charAt(i++);
          out.scrollTop = out.scrollHeight;
          if (i > text.length) clearInterval(t);
        }, 10);
      }

      function runDemoLogs() {
        const btn = document.getElementById("run-tests");
        btn.disabled = true;
        let t = 0;
        LOGS.forEach((entry, idx) => {
          t += entry.delay;
          setTimeout(() => {
            appendLogLine(entry.text, entry.type);
            if (idx === LOGS.length - 1) btn.disabled = false;
          }, t);
        });
      }

      document
        .getElementById("run-tests")
        .addEventListener("click", runDemoLogs);

      document
        .getElementById("clear-logs")
        .addEventListener("click", () => {
          document.getElementById("logs").innerHTML = "";
        });

      setTimeout(runDemoLogs, 600);
    </script>

    <!-- Plugin Test -->
    <script>
      function testSEOPlugin() {
        const metaDescription = document.querySelector(
          'meta[name="description"]'
        );
        const ogTitle = document.querySelector('meta[property="og:title"]');
        return !!(metaDescription && ogTitle);
      }

      function resolveAgainstBase(href) {
        try {
          return new URL(href, document.baseURI).href;
        } catch {
          return href;
        }
      }

      function buildCandidates(filename) {
        const candidates = new Set();
        candidates.add(resolveAgainstBase(filename));
        try {
          candidates.add(
            new URL("/" + filename.replace(/^\/+/, ""), location.origin).href
          );
        } catch {}
        try {
          const parts = location.pathname.split("/").filter(Boolean);
          if (parts.length > 0) {
            candidates.add(
              new URL(`/${parts[0]}/${filename}`, location.origin).href
            );
          }
        } catch {}
        const canonical = document
          .querySelector('link[rel="canonical"]')
          ?.getAttribute("href");
        const ogUrl = document
          .querySelector('meta[property="og:url"]')
          ?.getAttribute("content");
        for (const src of [canonical, ogUrl]) {
          if (src) {
            try {
              const base =
                new URL(src).origin +
                new URL(src).pathname.replace(/\/[^/]*$/, "/");
              candidates.add(new URL(filename, base).href);
            } catch {}
          }
        }
        return Array.from(candidates);
      }

      async function findExistingFile(filename, timeout = 3000) {
        const candidates = buildCandidates(filename);
        for (const url of candidates) {
          try {
            const controller = new AbortController();
            const id = setTimeout(() => controller.abort(), timeout);
            const res = await fetch(url, {
              method: "GET",
              cache: "no-store",
              signal: controller.signal,
            });
            clearTimeout(id);
            if (res && res.ok) return { found: true, url };
          } catch {}
        }
        return { found: false, tried: candidates };
      }

      async function runPluginTests() {
        const seoOk = testSEOPlugin();
        const sitemapCheck = await findExistingFile("sitemap.xml");
        const robotsCheck = await findExistingFile("robots.txt");
        const resultEl = document.getElementById("plugin-test");

        if (seoOk && sitemapCheck.found && robotsCheck.found) {
          resultEl.innerHTML =
            `<strong style="color:green;">✅ Plugin is working!</strong><br/>` +
            `<div style="font-size:0.9em;margin-top:6px;">sitemap: ${sitemapCheck.url}<br/>robots: ${robotsCheck.url}</div>`;
        } else {
          const errors = [];
          if (!seoOk) errors.push("SEO meta tags missing");
          if (!sitemapCheck.found) errors.push("sitemap.xml missing");
          if (!robotsCheck.found) errors.push("robots.txt missing");
          resultEl.innerHTML =
            `<strong style="color:red;">❌ Plugin test failed:</strong> ${errors.join(
              ", "
            )}<br/>` +
            `<div style="font-size:0.8em;margin-top:6px;color:#666;">Tried: ${(sitemapCheck.tried || [])
              .concat(robotsCheck.tried || [])
              .join(" , ")}</div>`;
        }
      }

      document.addEventListener("DOMContentLoaded", runPluginTests);
    </script>
  </body>
</html>
